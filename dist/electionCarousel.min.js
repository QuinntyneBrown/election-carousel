angular.module("templates",[]),angular.module("election-carousel",["ui.router","templates"]).config(["$stateProvider",function(e){ElectionCarousel.States.configure(e)}]);var ElectionCarousel;!function(e){"use strict";var t=function(){function e(){}return e.configure=function(e){e.state("default-empty",{url:"",templateUrl:"src/app/views/ridings.html",resolve:{ridings:["$q","riding","ridingDataService",function(e,t,n){var r=e.defer();return n.getAll().then(function(e){for(var n=[],i=0;i<e.length;i++)n.push(t.createInstance({data:e[i]}));r.resolve(n)}),r.promise}]},controller:"ridingsController",controllerAs:"vm"}),e.state("default",{url:"",templateUrl:"src/app/views/ridings.html",resolve:{ridings:["$q","riding","ridingDataService",function(e,t,n){var r=e.defer();return n.getAll().then(function(e){for(var n=[],i=0;i<e.length;i++)n.push(t.createInstance({data:e[i]}));r.resolve(n)}),r.promise}]},controller:"ridingsController",controllerAs:"vm"})},e}();e.States=t}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){"use strict";var t=function(){function e(e){this.ridings=e}return e}();e.RidingsController=t,angular.module("election-carousel").controller("ridingsController",["ridings",t])}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){"use strict";var t=function(e,t){if(!e||!e.tagName)return"";var n,r,i=document.createElement("div");return i.appendChild(e.cloneNode(!1)),n=i.innerHTML,t&&(r=n.indexOf(">")+1,n=n.substring(0,r)+e.innerHTML+n.substring(r)),i=null,n};angular.module("election-carousel").value("getHtml",t)}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){e.getX=function(e){var t=angular.element(e).css("transform");if("none"===t)return 0;JSON.parse(t.replace(/^\w+\(/,"[").replace(/\)$/,"]"));return JSON.parse(t.replace(/^\w+\(/,"[").replace(/\)$/,"]"))[4]},angular.module("election-carousel").value("getX",e.getX)}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){e.isMobile=function(){return window.innerWidth<768},angular.module("election-carousel").value("isMobile",e.isMobile)}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){e.translateX=function(e,t){return angular.element(e).css({"-moz-transform":"translateX("+t+"px)","-webkit-transform":"translateX("+t+"px)","-ms-transform":"translateX("+t+"px)","-transform":"translateX("+t+"px)"}),e},angular.module("election-carousel").value("translateX",e.translateX)}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){"use strict";var t=function(){function e(t,n){var r=this;this.$filter=t,this.$injector=n,this.createInstance=function(t){var n=new e(r.$filter,r.$injector);return n.party=r.$injector.get("party").createInstance({partyCode:t.data.partyCode}),n.name=t.data.name,n.votes=t.data.votes,n.isElected=t.data.isElected,n.totalVotes=t.totalVotes,n}}return Object.defineProperty(e.prototype,"totalVotes",{get:function(){return this._totalVotes},set:function(e){this._totalVotes=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstName",{get:function(){return this.name.split(" ")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastName",{get:function(){for(var e=this.name.split(" "),t=[],n=1;n<e.length;n++)t.push(e[n]);return t.join(" ")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"votes",{get:function(){return this._votes},set:function(e){this._votes=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"percentageOfTotalVotes",{get:function(){var e=this._votes/this.totalVotes,t=this.$filter("number")(100*e,1);return t+"%"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"party",{get:function(){return this._party},set:function(e){this._party=e},enumerable:!0,configurable:!0}),e}();e.Candidate=t,angular.module("election-carousel").service("candidate",["$filter","$injector",t])}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){"use strict";var t=function(){function e(){this.createInstance=function(t){var n=new e,r=angular.element("<div class='container'></div>");return r.css("width",t.width),r.css("transition","all 1s cubic-bezier(.10, .10, .25, .90)"),t.parentElement.append(r),n.augmentedJQuery=t.parentElement.find(".container"),n}}return Object.defineProperty(e.prototype,"augmentedJQuery",{get:function(){return this._augmentedJQuery},set:function(e){this._augmentedJQuery=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this.augmentedJQuery[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.augmentedJQuery.height()},enumerable:!0,configurable:!0}),e}();e.Container=t,angular.module("election-carousel").service("container",[t])}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){"use strict";var t=function(){function e(t){var n=this;this.$compile=t,this.createInstance=function(t){var r=new e(n.$compile),i=["<div class='navigation'>","<div class='previous' data-ng-click='onPrevious()'><a><&nbsp;&nbsp;</a></div>","<div class='next' data-ng-click='onNext()'><a>&nbsp;&nbsp;></a></div>","<div class='clear'></div>","</div>"].join(" "),a=n.$compile(angular.element(i))(t.scope);return t.parentElement.append(a),r}}return e}();e.Navigation=t,angular.module("election-carousel").service("navigation",["$compile",t])}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){"use strict";var t=function(){function e(){this.createInstance=function(t){var n=new e;return n.partyCode=t.partyCode,n.id=t.id,n}}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorCode",{get:function(){return"NDP"==this.partyCode?"#ED5C27":"PC"==this.partyCode?"#0C499C":"LIB"==this.partyCode?"#D71920":"GRN"==this.partyCode?"#4C9F45":"#666"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partyCode",{get:function(){return this._partyCode},set:function(e){this._partyCode=e},enumerable:!0,configurable:!0}),e}();e.Party=t,angular.module("election-carousel").service("party",[t])}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){"use strict";var t=function(){function e(){this.createInstance=function(t){var n=new e;return n.container=t.container,n}}return e}();e.RenderedNodes=t,angular.module("election-carousel").service("renderedNodes",[t])}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){"use strict";var t=function(){function e(t,n,r,i,a){var o=this;this.$compile=t,this.$injector=n,this.$timeout=r,this.getX=i,this.translateX=a,this.createInstance=function(t){var n=new e(o.$compile,o.$injector,o.$timeout,o.getX,o.translateX);return n.template=t.template,n.items=t.items,n.itemName=t.itemName,n.scope=t.scope,n.parentElement=t.parentElement,n.guid=t.attributes.carouselGuid,n.viewPort=o.$injector.get("viewPort").createInstance({height:Number(t.attributes.carouselHeight),width:Number(t.attributes.carouselWidth),parentElement:t.parentElement}),n.lastViewPortWidth=n.viewPort.width,setInterval(function(){n.lastViewPortWidth!=n.viewPort.width&&(n.lastViewPortWidth=n.viewPort.width,n.reRender())},10),n.container=o.$injector.get("container").createInstance({height:Number(t.attributes.carouselHeight),width:Number(t.attributes.carouselWidth)*t.items.length,parentElement:n.viewPort.augmentedJQuery}),n.container.htmlElement.addEventListener("transitionend",function(){n.inTransition=!1}),n.navigation=o.$injector.get("navigation").createInstance({guid:n.guid,parentElement:n.viewPort.augmentedJQuery,scope:n.scope}),n.scope=t.scope,n.scope.onPrevious=n.renderPrevious,n.scope.onNext=n.renderNext,n},this.render=function(e){o.hasRendered||o.initialRender()},this.reRender=function(){o.translateX(o.container.htmlElement,0),o.scope.$$phase||o.scope.$digest()},this.renderNext=function(){if(!o.inTransition){o.inTransition=!0;var e=o.getX(o.container.htmlElement);e===o.items.length*-o.lastViewPortWidth+o.lastViewPortWidth?o.translateX(o.container.htmlElement,0):o.translateX(o.container.htmlElement,e-o.lastViewPortWidth)}},this.renderPrevious=function(){if(!o.inTransition){o.inTransition=!0;var e=o.getX(o.container.htmlElement);0===e?o.translateX(o.container.augmentedJQuery[0],e+o.items.length*-o.lastViewPortWidth+o.lastViewPortWidth):o.translateX(o.container.augmentedJQuery[0],e+o.lastViewPortWidth)}},this.initialRender=function(){for(var e=document.createDocumentFragment(),t=0;t<o.items.length;t++){var n=o.scope.$new(!0);n[o.itemName]=o.items[t],n.$$index=t,n.viewPort=o.viewPort,n.container=o.container;var r=o.$compile(angular.element(o.template))(n);e.appendChild(r[0])}o.container.augmentedJQuery[0].appendChild(e),o.hasRendered=!0},this.hasRendered=!1,this.inTransition=!1,this.lastViewPortWidth=0}return Object.defineProperty(e.prototype,"guid",{get:function(){return this._guid},set:function(e){this._guid=e},enumerable:!0,configurable:!0}),e}();e.Renderer=t,angular.module("election-carousel").service("renderer",["$compile","$injector","$timeout","getX","translateX",t])}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){"use strict";var t=function(){function e(t){var n=this;this.candidate=t,this.createInstance=function(t){var r=new e(n.candidate);r.id=t.data.id,r.name=t.data.name;for(var i=0;i<t.data.results.length;i++)r.totalVotes=r.totalVotes+t.data.results[i].votes;for(var i=0;i<t.data.results.length;i++){var a=n.candidate.createInstance({totalVotes:r.totalVotes,data:t.data.results[i]}),o=r.candidates;o.push(a),r.candidates=o,t.data.results[i].isElected&&(r.winningCandidate=a)}return r},this._candidates=[],this._totalVotes=0}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"candidates",{get:function(){return this._candidates.sort(function(e,t){return t.votes-e.votes})},set:function(e){this._candidates=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalVotes",{get:function(){return this._totalVotes},set:function(e){this._totalVotes=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"winningCandidate",{get:function(){return this._winningCandidate},set:function(e){this._winningCandidate=e},enumerable:!0,configurable:!0}),e}();e.Riding=t,angular.module("election-carousel").service("riding",["candidate",t])}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){"use strict";var t=function(){function e(e,t){var n=this;this.$http=e,this.$q=t,this.getAll=function(){var e=n.$q.defer();return jQuery.ajax({type:"GET",url:"http://static.globalnews.ca/content/test/results-2011.js",jsonpCallback:"gNews_getRidingDetailsCallback",dataType:"jsonp",success:function(t){e.resolve(t)}}),e.promise}}return e}();e.RidingsDataService=t,angular.module("election-carousel").service("ridingDataService",["$http","$q",t])}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){"use strict";var t=function(){function e(){this.createInstance=function(t){var n=new e,r=angular.element("<div class='view-port'></div>");return r.css("overflowX","hidden"),r.css("height",t.height),r.css("width",t.width),t.parentElement.append(r),n.augmentedJQuery=t.parentElement.find(".view-port"),n}}return Object.defineProperty(e.prototype,"augmentedJQuery",{get:function(){return this._augmentedJQuery},set:function(e){this._augmentedJQuery=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.augmentedJQuery.width()},enumerable:!0,configurable:!0}),e}();e.ViewPort=t,angular.module("election-carousel").service("viewPort",[t])}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){var t;!function(e){var t=function(){function e(){this.restrict="E",this.replace=!0,this.templateUrl="src/app/directives/appFooter/appFooter.html",this.link=function(e,t,n){}}return e.createInstance=function(){return new e},e}();e.AppFooter=t}(t=e.Directives||(e.Directives={}))}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){var t;!function(e){var t=function(){function e(){this.restrict="E",this.replace=!0,this.scope={candidates:"="},this.templateUrl="src/app/directives/candidateList/candidateList.html",this.link=function(e,t,n){}}return e.createInstance=function(){return new e},e}();e.CandidateList=t,angular.module("election-carousel").directive("candidateList",[t.createInstance])}(t=e.Directives||(e.Directives={}))}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){var t;!function(e){var t=function(){function e(){this.restrict="E",this.replace=!0,this.templateUrl="src/app/directives/appHeader/appHeader.html",this.link=function(e,t,n){}}return e.createInstance=function(){return new e},e}();e.AppHeader=t}(t=e.Directives||(e.Directives={}))}(ElectionCarousel||(ElectionCarousel={}));var ElectionCarousel;!function(e){var t=function(){function e(e,t,n){var r=this;this.$interval=e,this.getHtml=t,this.renderer=n,this.restirct="A",this.transclude="element",this.scope=!1,this.compile=function(e){function t(e){var t=e.carousel.match(/^\s*(.+)\s+in\s+(.*?)\s*(\s+track\s+by\s+(.+)\s*)?$/);return t[1]}function n(e,t){var n=t.carousel.match(/^\s*(.+)\s+in\s+(.*?)\s*(\s+track\s+by\s+(.+)\s*)?$/);if(n){for(var r=n[2].split("."),i=e,a=0;a<r.length;a++)i=i[r[a]];return i}return JSON.parse(t.carousel)}function i(e,t){for(var n=[],r=e[0].attributes,i=0;i<r.length;i++)r[i].nodeName.indexOf(t)>-1&&n.push(r[i].nodeName);n.forEach(function(t){e[0].removeAttribute(t)})}var a=r.renderer,o=e.parent(),s=r.getHtml;return function(e,r,c,u,l){l(e.$new(),function(r){i(r,"carousel"),a.createInstance({parentElement:angular.element(o),template:s(r[0],!0),scope:e,attributes:c,items:n(e,c),itemName:t(c)}).render()})}}}return e.createInstance=function(t,n,r){return new e(t,n,r)},e}();e.Carousel=t,angular.module("election-carousel").directive("carousel",["$interval","getHtml","renderer",t.createInstance])}(ElectionCarousel||(ElectionCarousel={}));